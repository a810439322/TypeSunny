<Window x:Class="TypeSunny.WinRaceLeaderboard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="赛文排行榜" Height="700" Width="1400" Icon="/Resources/ico/sunny.ico"
        MinHeight="500" MinWidth="1000"
        WindowStartupLocation="CenterOwner"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip">
    <Border x:Name="mainBorder"
            CornerRadius="10"
            BorderThickness="2"
            Margin="5"
            MouseLeftButtonDown="Border_MouseLeftButtonDown">
        <Border.Effect>
            <DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="10" ShadowDepth="2"/>
        </Border.Effect>
        <Grid x:Name="mainGrid" Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 标题栏 -->
            <Grid Grid.Row="0" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="txtTitle" Grid.Column="0"
                           Text="赛文排行榜"
                           FontSize="20" FontWeight="Bold"
                           VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="lblDate" Text="日期:" VerticalAlignment="Center" Margin="0,0,8,0" FontSize="13"/>
                    <Button x:Name="btnPrevDay" Content="◀" Width="35" Height="28" VerticalAlignment="Center" Click="BtnPrevDay_Click" ToolTip="前一天"/>
                    <DatePicker x:Name="datePicker" Width="130" Height="28" VerticalAlignment="Center" Margin="8,0"/>
                    <Button x:Name="btnNextDay" Content="▶" Width="35" Height="28" VerticalAlignment="Center" Margin="8,0,0,0" Click="BtnNextDay_Click" ToolTip="后一天"/>
                    <Button x:Name="btnRefresh" Content="刷新" Width="70" Height="28" Margin="15,0,0,0" Click="BtnRefresh_Click"/>
                </StackPanel>
            </Grid>

            <!-- 排行榜列表 -->
            <DataGrid x:Name="dgLeaderboard" Grid.Row="1"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      HeadersVisibility="Column"
                      GridLinesVisibility="Horizontal"
                      CanUserResizeColumns="True"
                      CanUserSortColumns="False"
                      EnableRowVirtualization="True"
                      EnableColumnVirtualization="True"
                      BorderThickness="1"
                      FontSize="13"
                      RowHeight="28"
                      ColumnHeaderHeight="32">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="排名" Binding="{Binding Rank}" Width="70" MinWidth="60"/>
                    <DataGridTextColumn Header="用户名" Binding="{Binding Username}" Width="150" MinWidth="100"/>
                    <DataGridTextColumn Header="速度" Binding="{Binding Speed}" Width="90" MinWidth="70"/>
                    <DataGridTextColumn Header="击键" Binding="{Binding HitRate}" Width="90" MinWidth="70"/>
                    <DataGridTextColumn Header="码长" Binding="{Binding CodeLength}" Width="90" MinWidth="70"/>
                    <DataGridTextColumn Header="时间" Binding="{Binding Time}" Width="100" MinWidth="90"/>
                    <DataGridTextColumn Header="回改" Binding="{Binding Correction}" Width="80" MinWidth="60"/>
                    <DataGridTextColumn Header="键数" Binding="{Binding KeyCount}" Width="90" MinWidth="70"/>
                    <DataGridTextColumn Header="键准" Binding="{Binding KeyAccuracy}" Width="90" MinWidth="70"/>
                    <DataGridTextColumn Header="打词率" Binding="{Binding WordRate}" Width="90" MinWidth="70"/>
                    <DataGridTextColumn Header="输入法" Binding="{Binding InputMethod}" Width="*" MinWidth="120"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- 分页栏 -->
            <Grid Grid.Row="2" Margin="0,15,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="txtStatus" Grid.Column="0"
                           Text="加载中..."
                           FontSize="13"
                           VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button x:Name="btnFirst" Content="首页" Width="65" Height="28" Margin="5" Click="BtnFirst_Click"/>
                    <Button x:Name="btnPrev" Content="上一页" Width="65" Height="28" Margin="5" Click="BtnPrev_Click"/>
                    <TextBlock x:Name="txtPageInfo" Text="第 1/1 页" FontSize="13" VerticalAlignment="Center" Margin="15,0"/>
                    <Button x:Name="btnNext" Content="下一页" Width="65" Height="28" Margin="5" Click="BtnNext_Click"/>
                    <Button x:Name="btnLast" Content="末页" Width="65" Height="28" Margin="5" Click="BtnLast_Click"/>
                </StackPanel>

                <Button x:Name="btnClose" Grid.Column="2" Content="关闭" Width="85" Height="28" HorizontalAlignment="Right" Click="BtnClose_Click"/>
            </Grid>

            <!-- 缩放手柄 -->
            <Grid x:Name="resizeGrip" Grid.Row="2" HorizontalAlignment="Right" VerticalAlignment="Bottom"
                  Width="20" Height="20" Margin="0,0,-10,-10"
                  Background="Transparent" Cursor="SizeNWSE"
                  MouseLeftButtonDown="ResizeGrip_MouseLeftButtonDown">
                <Path Data="M 0,10 L 10,10 L 10,0" Stroke="{Binding ElementName=mainBorder, Path=BorderBrush}" StrokeThickness="1.5"/>
                <Path Data="M 5,15 L 15,15 L 15,5" Stroke="{Binding ElementName=mainBorder, Path=BorderBrush}" StrokeThickness="1.5"/>
            </Grid>
        </Grid>
    </Border>
</Window>
